<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>J.A.R.V.I.S. - Just A Rather Very Intelligent System</title>
    <meta name="description" content="JARVIS AI Interface - Iron Man Style Virtual Assistant">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <!-- Particle Background -->
    <canvas id="particles"></canvas>

    <!-- Scan Lines Overlay -->
    <div class="scanlines"></div>

    <!-- Landing Screen -->
    <div class="landing-screen" id="landingScreen">
        <div class="arc-reactor-bg"></div>
        <div class="landing-content">
            <h1 class="landing-title">J.A.R.V.I.S.</h1>
            <h2 class="landing-subtitle">YOUR PERSONAL AI ASSISTANT</h2>
            <p class="landing-tagline">GET READY TO BE IRON MAN</p>

            <button class="login-btn" id="loginBtn">
                <span class="btn-text">INITIALIZE SYSTEM</span>
                <span class="btn-glare"></span>
            </button>
            <div id="loginStatus" class="status-detail" style="margin-top: 15px; opacity: 0.8;">OFFLINE</div>
            <div class="scan-effect"></div>
        </div>
    </div>

    <!-- Security Authorization Overlay -->
    <div class="security-overlay" id="securityOverlay">
        <div class="biometric-hud" id="biometricHud">
            <div class="scan-reticle"></div>
            <video id="faceVideo" autoplay playsinline></video>
            <canvas id="faceOverlay"></canvas>
            <div id="subjectLabel" class="subject-label">UNKNOWN</div>
        </div>
        <div class="security-status" id="securityStatus">
            <div class="status-tag">IDENTIFYING...</div>
            <div class="status-detail">SCANNING BIOMETRIC DATA MESH</div>
        </div>

        <!-- Enrollment Form (Initially Hidden) -->
        <div id="enrollmentForm" class="security-form" style="display: none;">
            <p>NAME NOT IN DATABASE. PLEASE REGISTER SUBJECT.</p>
            <div class="form-group">
                <input type="text" id="userNameInput" placeholder="ENTER SUBJECT NAME..." autocomplete="off">
                <button id="registerBtn" class="register-btn">REGISTER</button>
            </div>
        </div>
    </div>

    <!-- Main Container (Initially Hidden) -->
    <div class="jarvis-container" id="mainInterface" style="display: none; opacity: 0;">

        <!-- Header -->
        <header class="header">
            <div class="logo">
                <span class="logo-text">J.A.R.V.I.S.</span>
                <span class="logo-subtitle">Just A Rather Very Intelligent System</span>
            </div>
            <div class="status-bar">
                <div class="status-item">
                    <span class="status-label">STATUS</span>
                    <span class="status-value online">ONLINE</span>
                </div>
                <div class="status-item">
                    <span class="status-label">SYSTEM</span>
                    <span class="status-value" id="systemTime">--:--:--</span>
                </div>
                <div class="status-item">
                    <span class="status-label">CPU</span>
                    <span class="status-value" id="cpuUsage">---%</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">

            <!-- Left Panel -->
            <aside class="side-panel left-panel">
                <div class="panel-header">
                    <span class="panel-title">SYSTEM DIAGNOSTICS</span>
                </div>
                <div class="diagnostics">
                    <div class="diagnostic-item">
                        <span class="diag-label">Neural Network</span>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 94%"></div>
                        </div>
                        <span class="diag-value">94%</span>
                    </div>
                    <div class="diagnostic-item">
                        <span class="diag-label">System Storage (C:)</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="mem-bar" style="width: 78%"></div>
                        </div>
                        <span class="diag-value" id="mem-val">78%</span>
                    </div>
                    <div class="diagnostic-item">
                        <span class="diag-label">Power Core</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="power-bar" style="width: 100%"></div>
                        </div>
                        <span class="diag-value" id="power-val">100%</span>
                    </div>
                    <div class="diagnostic-item">
                        <span class="diag-label">Security Protocol</span>
                        <div class="progress-bar">
                            <div class="progress-fill" id="sec-bar" style="width: 100%"></div>
                        </div>
                        <span class="diag-value" id="sec-val">ACTIVE</span>
                    </div>
                </div>

                <div class="panel-header" style="margin-top: 20px;">
                    <span class="panel-title">QUICK COMMANDS</span>
                </div>
                <div class="quick-commands">
                    <button class="cmd-btn" data-command="What time is it?">
                        <span class="cmd-icon">üïê</span> Time
                    </button>
                    <button class="cmd-btn" data-command="Tell me a joke">
                        <span class="cmd-icon">üòÑ</span> Joke
                    </button>
                    <button class="cmd-btn" data-command="What's the weather?">
                        <span class="cmd-icon">üå§Ô∏è</span> Weather
                    </button>
                    <button class="cmd-btn" data-command="System status">
                        <span class="cmd-icon">üìä</span> Status
                    </button>
                </div>
            </aside>

            <!-- Center - HUD -->
            <section class="hud-section">
                <!-- Rotating Rings -->
                <div class="hud-container">
                    <div class="hud-ring ring-1"></div>
                    <div class="hud-ring ring-2"></div>
                    <div class="hud-ring ring-3"></div>
                    <div class="hud-ring ring-4"></div>

                    <!-- Core -->
                    <div class="core">
                        <div class="core-inner">
                            <div class="core-pulse"></div>
                            <canvas id="waveform"></canvas>
                        </div>
                    </div>

                    <!-- Arc Reactor Style Elements -->
                    <div class="arc-segments">
                        <div class="arc-segment seg-1"></div>
                        <div class="arc-segment seg-2"></div>
                        <div class="arc-segment seg-3"></div>
                        <div class="arc-segment seg-4"></div>
                        <div class="arc-segment seg-5"></div>
                        <div class="arc-segment seg-6"></div>
                    </div>
                </div>

                <!-- Voice Indicator -->
                <div class="voice-indicator" id="voiceIndicator">
                    <div class="voice-bars">
                        <div class="voice-bar"></div>
                        <div class="voice-bar"></div>
                        <div class="voice-bar"></div>
                        <div class="voice-bar"></div>
                        <div class="voice-bar"></div>
                    </div>
                    <span class="voice-status" id="voiceStatus">STANDBY</span>
                    <!-- Microphone Level Indicator -->
                    <div class="mic-level-container">
                        <div class="mic-level-bar" id="micLevelBar"></div>
                    </div>
                    <span class="mic-level-text" id="micLevelText">MIC: --</span>
                </div>

                <!-- Response Display -->
                <div class="response-display" id="responseDisplay">
                    <p class="response-text" id="responseText">Good day, sir. How may I assist you?</p>
                </div>
            </section>

            <!-- Right Panel -->
            <aside class="side-panel right-panel">
                <div class="panel-header">
                    <span class="panel-title">COMMUNICATION LOG</span>
                </div>
                <div class="chat-log" id="chatLog">
                    <div class="chat-message jarvis">
                        <span class="msg-sender">JARVIS</span>
                        <span class="msg-content">Systems initialized. All protocols active.</span>
                        <span class="msg-time">STARTUP</span>
                    </div>
                </div>

                <div class="panel-header" style="margin-top: 20px;">
                    <span class="panel-title">SENSORS</span>
                </div>
                <button class="voice-persona-btn" id="personaToggle" title="Switch AI Persona"
                    onclick="window.togglePersona()">
                    <svg class="persona-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <circle cx="12" cy="12" r="10" />
                        <circle cx="12" cy="12" r="6" />
                        <circle cx="12" cy="12" r="2" />
                        <line x1="12" y1="2" x2="12" y2="6" />
                        <line x1="12" y1="18" x2="12" y2="22" />
                        <line x1="2" y1="12" x2="6" y2="12" />
                        <line x1="18" y1="12" x2="22" y2="12" />
                    </svg>
                    <span class="persona-name">JARVIS</span>
                </button>
                <div class="sensors-grid">
                    <div class="sensor-item">
                        <div class="sensor-icon">üå°Ô∏è</div>
                        <div class="sensor-info">
                            <span class="sensor-label">TEMP</span>
                            <span class="sensor-value" id="tempValue">23¬∞C</span>
                        </div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-icon">üí®</div>
                        <div class="sensor-info">
                            <span class="sensor-label">HUMIDITY</span>
                            <span class="sensor-value" id="humidityValue">45%</span>
                        </div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-icon">üì°</div>
                        <div class="sensor-info">
                            <span class="sensor-label">NETWORK</span>
                            <span class="sensor-value online">ACTIVE</span>
                        </div>
                    </div>
                    <div class="sensor-item">
                        <div class="sensor-icon">üëÅÔ∏è</div>
                        <div class="sensor-info">
                            <span class="sensor-label">VISION</span>
                            <span class="sensor-value online" id="visionStatus">ACTIVE</span>
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Input Section -->
        <footer class="input-section">
            <div class="input-container">
                <button class="mic-btn" id="micBtn" title="Voice Input">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path
                            d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm-1-9c0-.55.45-1 1-1s1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V5zm6 6c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" />
                    </svg>
                    <div class="mic-ripple"></div>
                </button>
                <input type="text" class="text-input" id="textInput"
                    placeholder="Enter command or speak to J.A.R.V.I.S..." autocomplete="off">
                <button class="send-btn" id="sendBtn" title="Send Command">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
                    </svg>
                </button>
            </div>
            <div class="input-hint">
                <span>Press <kbd>Enter</kbd> to send ‚Ä¢ Click üé§ for voice input</span>
            </div>
        </footer>
    </div>

    <!-- MediaPipe Face Mesh -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"
        crossorigin="anonymous"></script>

    <script type="module" src="script-v3.js"></script>
</body>

</html>